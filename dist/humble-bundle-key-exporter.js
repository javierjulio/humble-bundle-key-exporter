var HumbleBundleKeyExporter=function(e){"use strict";function t(e){return new Promise((t=>setTimeout(t,e)))}function n(e,t){const n=document.createElement("a");n.href=URL.createObjectURL(new Blob([e])),n.download=t,n.click(),setTimeout((()=>URL.revokeObjectURL(n.href)),500)}const o=async()=>{const e=document.getElementById("hide-redeemed");console.log("Hiding redeemed keys."),e.checked||(e.click(),await t(250))},r=()=>[...document.querySelectorAll('.unredeemed-keys-table tbody tr[class=""]')].map((e=>({platform:e.querySelector(".platform :first-child").title.trim(),name:e.querySelector(".game-name h4").textContent.trim().replace(/®|™/g,""),bundle:e.querySelector(".game-name p").textContent.trim(),bundle_url:e.querySelector(".game-name a").href}))),c=()=>null!==document.querySelector(".js-jump-to-page.current + .js-jump-to-page"),l=async()=>{let e=r();return c()?(await(async()=>{const e=document.querySelector(".js-jump-to-page.current + .js-jump-to-page");null!==e&&(e.click(),await t(100))})(),e.concat(await l())):e};return e.delayOf=t,e.downloadFile=n,e.getKeysForCurrentPage=r,e.hasNextPage=c,e.run=()=>{window.location.pathname.includes("/home/keys")?(async()=>{console.log("Setting first page."),document.querySelector('.js-jump-to-page[data-index="0"]').click(),await t(100)})().then(o).then(l).then((e=>JSON.stringify(e,null,2))).then((e=>n(e,"humble-bundle-keys.json"))):console.log("No eligible page detected.")},e}({});
//# sourceMappingURL=humble-bundle-key-exporter.js.map
